这题也是mdzz...
dp很显然，一颗子树分配费用f i j
线性规划也很显然，绝对值可以化掉的u>=x u>=-x
然而这题的范围。。。
其实我直接就想到了以前读到过的维护整个函数的方法，，，
15年集训队的文章
先用py把f[u][x]画出来，果然是下凸壳
然后考虑u上面加一条边以后的g[u][x]，发现
其实维护导数比较方便
就是平移和两边一些修改。。。
平移只要记录一下
关键是，我们还要支持两个函数的加法
似乎只能启发式合并的平衡树或者线段树
对。。就是这么搞
wa到死，各种细节跪
然后最后坑死的一个是数组没清零mdzz
然后最后改完以后wa了一个点
然后加了一个io优化就过了